$(document).ready(function(){$(".sortingtables").DataTable();$("div.custom-tab-menu>div.list-group>a").click(function(n){n.preventDefault();$(this).siblings("a.active").removeClass("active");$(this).addClass("active");var t=$(this).index();$("div.custom-tab>div.custom-tab-content").removeClass("active");$("div.custom-tab>div.custom-tab-content").eq(t).addClass("active")});var n={jcropApi:"",imageCropWidth:0,imageCropHeight:0,cropPointX:0,cropPointY:0},u=function(t){if(t.files&&t.files[0]){var r=new FileReader;n.jcropApi!==""&&n.jcropApi.destroy();r.onload=function(n){jQuery("#cropModal").modal({backdrop:"static"});$("#imgEmpPhoto").attr("src","");var t=$("#imgEmpPhoto").attr("src",n.target.result),r=t[0].height,u=t[0].width;i()};r.readAsDataURL(t.files[0])}},i=function(){var i=$("#image_prev_container").width();$("#imgEmpPhoto").Jcrop({setSelect:[0,0,320],minSize:[52,140],aspectRatio:4,keySupport:!1,boxWidth:i,onChange:t,onSelect:t},function(){n.jcropApi=this})},t=function(t){console.log(n);n.imageCropWidth=t.w;n.imageCropHeight=t.h;n.cropPointX=t.x;n.cropPointY=t.y},f=function(){if(console.log(n),n.imageCropWidth===0&&n.imageCropHeight===0){alert("Please select crop area.");return}var t=$("#imgEmpPhoto").attr("src");r()},r=function(){var f=n.cropPointX,e=n.cropPointY,i=n.imageCropWidth,r=n.imageCropHeight,t=$("#canvas")[0],o=t.getContext("2d"),u=new Image;u.onload=function(){t.height=r;t.width=i;o.drawImage(u,f,e,i,r,0,0,i,r);console.log(t);console.log(t.toDataURL());$("#CropImage").val(t.toDataURL());$("#canvas").hide()};u.src=$("#imgEmpPhoto").attr("src")}});var getChildren=function(n){var t=[];return jQuery.each(n,function(n,i){var r={};r.name=i.organizationName;r.title=i.industry;r.orgId=i.organizationID;r.orgType=i.organizationTypeID;i.organizationBranch.length>0?(r.children=getChildren(i.organizationBranch),r.className="parentBranch"):r.className=i.organizationTypeID===1?"parentBranch":"index-"+n;t.push(r)}),t};